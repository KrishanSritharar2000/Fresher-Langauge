<!doctype html>

<html>

<head>
    <meta charset="utf-8">
    <title>Simple add example</title>
</head>

<body>
    <p id="p">Hellosdfsdf </p>
    <script>
        // async function fetchAndInstantiate() {
        //     const response = await fetch("http://localhost:5500/wasm/simple.wasm");
        //     const buffer = await response.arrayBuffer();
        //     const obj = await WebAssembly.instantiate(buffer);
        //     console.log(obj.instance.exports.add(1, 2));
        //     document.getElementById("p").innerText = (obj.instance.exports.add(1, 2));  // "3"
        // };
        // fetchAndInstantiate()
        WebAssembly.instantiateStreaming(fetch('simple.wasm'))
            .then(obj => {
                console.log(obj.instance.exports.add(1, 2));  // "3"
            });
    </script>
</body>

</html>